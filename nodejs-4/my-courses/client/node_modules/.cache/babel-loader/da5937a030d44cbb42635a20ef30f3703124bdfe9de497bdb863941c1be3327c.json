{"ast":null,"code":"import { createEffect, createEvent, createStore, sample } from \"effector\";\nimport { getUsers as getUsersApi, getUser as getUserApi } from \"../../api/rest/users\";\nimport { loginUserFx } from \"../auth/model\";\nconst $userId = createStore(null);\nconst getUsers = createEvent();\nconst getUser = createEvent();\nconst getUsersFx = createEffect(() => getUsersApi());\nconst getUserFx = createEffect(id => getUserApi(id));\nsample({\n  clock: loginUserFx.doneData,\n  fn: data => data.data.userId,\n  target: $userId\n});\nsample({\n  clock: getUsers,\n  target: getUsersFx\n});\nsample({\n  clock: getUser,\n  target: getUserFx\n});\nexport { getUser, $userId };","map":{"version":3,"names":["createEffect","createEvent","createStore","sample","getUsers","getUsersApi","getUser","getUserApi","loginUserFx","$userId","getUsersFx","getUserFx","id","clock","doneData","fn","data","userId","target"],"sources":["/Users/ilakolmakov/kolmakov-ilya-nodejs-otus/nodejs-4/my-courses/client/src/entities/user/model.ts"],"sourcesContent":["import {\n    createEffect,\n    createEvent,\n    createStore,\n    sample,\n  } from \"effector\";\n  import { getUsers as getUsersApi, getUser as getUserApi } from \"../../api/rest/users\";\n  import { User } from \"../../api/rest/users/types\";\nimport { loginUserFx } from \"../auth/model\";\n\n  const $userId = createStore<string | null>(null);\n  \n  const getUsers = createEvent();\n  const getUser = createEvent<string>();\n  \n  const getUsersFx = createEffect(() => getUsersApi());\n  const getUserFx = createEffect((id: string) => getUserApi(id));\n  \n  sample({\n    clock: loginUserFx.doneData,\n    fn: (data) => data.data.userId, \n    target: $userId\n  });\n  \n  sample({\n    clock: getUsers,\n    target: getUsersFx,\n  });\n  \n  sample({\n    clock: getUser,\n    target: getUserFx,\n  });\n  \n  export { getUser, $userId };\n  "],"mappings":"AAAA,SACIA,YAAY,EACZC,WAAW,EACXC,WAAW,EACXC,MAAM,QACD,UAAU;AACjB,SAASC,QAAQ,IAAIC,WAAW,EAAEC,OAAO,IAAIC,UAAU,QAAQ,sBAAsB;AAEvF,SAASC,WAAW,QAAQ,eAAe;AAEzC,MAAMC,OAAO,GAAGP,WAAW,CAAgB,IAAI,CAAC;AAEhD,MAAME,QAAQ,GAAGH,WAAW,EAAE;AAC9B,MAAMK,OAAO,GAAGL,WAAW,EAAU;AAErC,MAAMS,UAAU,GAAGV,YAAY,CAAC,MAAMK,WAAW,EAAE,CAAC;AACpD,MAAMM,SAAS,GAAGX,YAAY,CAAEY,EAAU,IAAKL,UAAU,CAACK,EAAE,CAAC,CAAC;AAE9DT,MAAM,CAAC;EACLU,KAAK,EAAEL,WAAW,CAACM,QAAQ;EAC3BC,EAAE,EAAGC,IAAI,IAAKA,IAAI,CAACA,IAAI,CAACC,MAAM;EAC9BC,MAAM,EAAET;AACV,CAAC,CAAC;AAEFN,MAAM,CAAC;EACLU,KAAK,EAAET,QAAQ;EACfc,MAAM,EAAER;AACV,CAAC,CAAC;AAEFP,MAAM,CAAC;EACLU,KAAK,EAAEP,OAAO;EACdY,MAAM,EAAEP;AACV,CAAC,CAAC;AAEF,SAASL,OAAO,EAAEG,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}