{"ast":null,"code":"import { createEffect, createEvent, sample } from \"effector\";\nimport { login, registration } from \"../../api/rest/auth\";\nconst regNewUser = createEvent();\nconst loginUser = createEvent();\nconst regNewUserFx = createEffect(data => registration(data));\nconst loginUserFx = createEffect(data => login(data));\nsample({\n  clock: regNewUser,\n  target: regNewUserFx\n});\nsample({\n  clock: loginUser,\n  target: loginUserFx\n});\nsample({\n  clock: loginUserFx.doneData,\n  fn: data => {\n    localStorage.setItem(\"token\", data.data.token);\n    localStorage.setItem(\"userId\", data.data.userId);\n  }\n});\nexport { regNewUser, regNewUserFx, loginUser, loginUserFx };","map":{"version":3,"names":["createEffect","createEvent","sample","login","registration","regNewUser","loginUser","regNewUserFx","data","loginUserFx","clock","target","doneData","fn","localStorage","setItem","token","userId"],"sources":["/Users/ilakolmakov/kolmakov-ilya-nodejs-otus/nodejs-4/my-courses/client/src/entities/auth/model.ts"],"sourcesContent":["import {\n  createStore,\n  combine,\n  createEffect,\n  createEvent,\n  sample,\n  merge,\n} from \"effector\";\nimport { createGate } from \"effector-react\";\n\nimport { login, registration } from \"../../api/rest/auth\";\nimport { Login, Registration } from \"../../api/rest/auth/types\";\nimport { getCourses, createCourse } from \"../../api/rest/courses\";\nimport { Course } from \"../../api/rest/courses/types\";\n\nconst regNewUser = createEvent<Registration>();\nconst loginUser = createEvent<Login>();\n\nconst regNewUserFx = createEffect((data: Registration) => registration(data));\nconst loginUserFx = createEffect((data: Login) => login(data));\n\nsample({\n  clock: regNewUser,\n  target: regNewUserFx,\n});\n\nsample({\n  clock: loginUser,\n  target: loginUserFx,\n});\n\nsample({\n  clock: loginUserFx.doneData,\n  fn: (data) => {\n    localStorage.setItem(\"token\", data.data.token);\n    localStorage.setItem(\"userId\", data.data.userId);\n  }\n});\n\nexport { regNewUser, regNewUserFx, loginUser, loginUserFx };\n"],"mappings":"AAAA,SAGEA,YAAY,EACZC,WAAW,EACXC,MAAM,QAED,UAAU;AAGjB,SAASC,KAAK,EAAEC,YAAY,QAAQ,qBAAqB;AAKzD,MAAMC,UAAU,GAAGJ,WAAW,EAAgB;AAC9C,MAAMK,SAAS,GAAGL,WAAW,EAAS;AAEtC,MAAMM,YAAY,GAAGP,YAAY,CAAEQ,IAAkB,IAAKJ,YAAY,CAACI,IAAI,CAAC,CAAC;AAC7E,MAAMC,WAAW,GAAGT,YAAY,CAAEQ,IAAW,IAAKL,KAAK,CAACK,IAAI,CAAC,CAAC;AAE9DN,MAAM,CAAC;EACLQ,KAAK,EAAEL,UAAU;EACjBM,MAAM,EAAEJ;AACV,CAAC,CAAC;AAEFL,MAAM,CAAC;EACLQ,KAAK,EAAEJ,SAAS;EAChBK,MAAM,EAAEF;AACV,CAAC,CAAC;AAEFP,MAAM,CAAC;EACLQ,KAAK,EAAED,WAAW,CAACG,QAAQ;EAC3BC,EAAE,EAAGL,IAAI,IAAK;IACZM,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEP,IAAI,CAACA,IAAI,CAACQ,KAAK,CAAC;IAC9CF,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEP,IAAI,CAACA,IAAI,CAACS,MAAM,CAAC;EAClD;AACF,CAAC,CAAC;AAEF,SAASZ,UAAU,EAAEE,YAAY,EAAED,SAAS,EAAEG,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}